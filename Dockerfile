FROM node:15-alpine
WORKDIR /app

COPY . .
RUN npm install

ENV NODE_ENV=production
ENV PORT=80
ENV TOKEN=NzQxOTkwMjc5Mjg3OTMwODgx.Xy_mTA.dv2cDCjWTSFvg2egV3MNQ-q23NA
ENV APPLICATION_CLIENT_ID=741990279287930881
ENV APPLICATION_CLIENT_SECRET=PHwlMNcAjrScjuftUI2iht8oC8xkWihz
ENV SESSION_SECRET=58262ee1f76ca7b84d559947c1cf659f275f867669cba881d6f9c338893804f064091c7620e83b48604daeebf632d33f3c8e20ea3fdf11adbb8ace01846c1d2c76becd7143a5f800a245c1445234d55d

EXPOSE 80
RUN npm run build

CMD [ "npm", "run", "serve" ]